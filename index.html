<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>악취 시민제보</title>

  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0b57d0" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="header">
    <h1>악취 시민제보</h1>
    <p class="sub">로그인 없이 참여 가능. 위치·시각은 제보 시 자동 기록된다.</p>
  </header>

  <main class="container">
    <!-- 1) 위치(참고용) -->
    <section class="card">
      <h2>1) 위치 확인(참고용)</h2>

      <div class="row">
        <button id="btnLocate" class="btn" type="button">내 위치 가져오기</button>
        <span id="locStatus" class="status">위치 미확인</span>
      </div>

      <div class="grid2">
        <div>
          <label>위도(lat)</label>
          <input id="lat" type="text" readonly />
        </div>
        <div>
          <label>경도(lon)</label>
          <input id="lon" type="text" readonly />
        </div>
        <div>
          <label>정확도(m)</label>
          <input id="acc" type="text" readonly />
        </div>
        <div>
          <label>접수시각(서버)</label>
          <input id="serverTime" type="text" readonly placeholder="서버 응답은 표시되지 않을 수 있음" />
        </div>
      </div>

      <p class="hint">제보 제출 시 자동으로 위치를 다시 수집한다. PC에서 위치가 부정확하면 스마트폰으로 제보를 권장한다.</p>
    </section>

    <!-- 2) 제보 입력 -->
    <section class="card">
      <h2>2) 냄새 정보 입력</h2>

      <div class="field">
        <label for="odorType">냄새 종류</label>
        <select id="odorType"></select>
      </div>

      <div class="field">
        <label>냄새 강도(0~5)</label>
        <div class="rangeRow">
          <input id="odorIntensity" type="range" min="0" max="5" step="1" value="2" />
          <span id="odorIntensityVal" class="pill">2</span>
        </div>
        <div class="rangeLegend">
          <span>0 무취</span>
          <span>5 매우 강함</span>
        </div>
      </div>

      <div class="field">
        <label for="durationCode">지속시간</label>
        <select id="durationCode"></select>
      </div>

      <div class="field">
        <label for="contextCode">발생 상황</label>
        <select id="contextCode"></select>
      </div>

      <!-- 층수(A안: 선택 입력) -->
      <div class="field">
        <label for="buildingFloor">층수(선택)</label>
        <input id="buildingFloor" type="number" inputmode="numeric" placeholder="예: 15 (지하층은 -1)" />
        <small class="note">동/호는 입력하지 않는다(개인 식별 위험 최소화).</small>
      </div>

      <div class="field">
        <label for="certaintyCode">확신도</label>
        <select id="certaintyCode"></select>
      </div>

      <div class="field">
        <label for="memoShort">간단 메모(선택, 80자 이내)</label>
        <input id="memoShort" type="text" maxlength="80" placeholder="예: 바람 타고 축사냄새가 강하게 유입" />
      </div>

      <div class="row">
        <button id="btnSubmit" class="btn primary" type="button">제보 제출</button>
        <span id="submitStatus" class="status"></span>
      </div>

      <details class="details">
        <summary>개인정보 안내</summary>
        <ul>
          <li>로그인/이름/연락처를 수집하지 않는다.</li>
          <li>위치(위·경도)와 제보 시각은 제보 처리 목적의 최소 정보로 저장된다.</li>
          <li>아파트의 경우 층수만 선택 입력 가능하며 동/호는 수집하지 않는다.</li>
        </ul>
      </details>
    </section>

    <!-- 설치 안내 -->
    <section class="card">
      <h2>설치(앱처럼 사용)</h2>
      <ol>
        <li>스마트폰에서 본 페이지 접속</li>
        <li>브라우저 메뉴 → <b>홈 화면에 추가</b></li>
        <li>이후 아이콘을 눌러 앱처럼 실행</li>
      </ol>
    </section>
  </main>

  <footer class="footer">
    <small>Research PWA MVP</small>
  </footer>

  <script src="app.js"></script>
</body>
</html>
